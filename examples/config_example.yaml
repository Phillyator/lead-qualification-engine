# Lead Qualification Engine — Example Configuration
# This is a generic example for a B2B SaaS company selling to mid-market.
# Copy this file and adapt it to your ICP.

# --- Input / Output ---
input:
  sheet_name: "Leads"
  header_row: 1             # 1-indexed row number containing column headers
  data_start_row: 2         # 1-indexed row number where data begins
  columns:
    company_name: 0         # 0-indexed column positions
    industry: 1
    employees: 2
    website: 3
    linkedin: 4
    revenue: 5
    founded: 6
    description: 7
    keywords: 8
    employee_bucket: 9

output:
  sheet_name: "Scored Leads"

# --- Size Scoring ---
# Define employee brackets and point values.
# Companies below min_employees are disqualified.
size_scoring:
  min_employees: 100
  brackets:
    - max: 250
      points: 10
    - max: 500
      points: 20
    - max: 2000
      points: 40            # sweet spot
    - max: 999999
      points: 25            # enterprise — longer sales cycles

# --- Industry Tiering ---
# Map industries to tiers with point values.
# Use the exact industry strings from your spreadsheet.
# Set points to null to disqualify an industry entirely.
# Any industry not listed falls back to default_tier / default_points.
industry_tiers:
  A:
    points: 35
    industries:
      - "Technology"
      - "Financial Services"
      - "Healthcare"
  B:
    points: 25
    industries:
      - "Manufacturing"
      - "Professional Services"
      - "Education"
  C:
    points: 10
    industries:
      - "Retail"
      - "Hospitality"
      - "Media"
  OUT:
    points: null
    industries:
      - "Government"         # example: exclude if you can't sell to gov

  default_tier: "C"
  default_points: 10

# --- Keyword Signals ---
# Scan company description and keywords for ICP-aligned signals.
# Each category awards its full point value if ANY term matches (substring match).
# Total keyword score is capped at the cap value.
keyword_signals:
  cap: 25

  categories:
    - name: "Multi-site / Distributed"
      points: 8
      terms:
        - locations
        - offices
        - branches
        - distributed
        - remote
        - global
        - worldwide
        - regional

    - name: "Growth signals"
      points: 5
      terms:
        - "series b"
        - "series c"
        - "rapid growth"
        - expanding
        - scaling
        - hiring

    - name: "Tech-forward"
      points: 4
      terms:
        - saas
        - cloud
        - digital transformation
        - automation
        - platform
        - api

    - name: "Complex org"
      points: 4
      terms:
        - enterprise
        - divisions
        - subsidiaries
        - "business units"
        - matrix

    - name: "Pain indicators"
      points: 4
      terms:
        - turnover
        - retention
        - burnout
        - engagement
        - satisfaction

# --- Conditional Signals ---
# These only apply when the industry matches a condition.
# Use exclude_if_category_matched to avoid double-counting.
conditional_signals:
  - name: "Healthcare product (not employer pain)"
    condition:
      industry_contains: "Healthcare"
      exclude_if_category_matched: "Pain indicators"
    points: 2
    terms:
      - pharmaceutical
      - clinical
      - medical device
      - biotech

# --- Flags & Penalties ---
# Flag companies that match certain patterns. Applies a score penalty.
flags:
  - name: "Already a customer"
    condition:
      industry_contains: ""   # applies to all industries — leave empty
    penalty: 100              # effectively disqualifies
    terms:
      - "existing customer"   # would need to be in the description

# --- Tier Thresholds ---
# Ordered from highest to lowest. First match wins.
tiers:
  - name: "A — Hot"
    min_score: 80
  - name: "B — Warm"
    min_score: 55
  - name: "C — Cool"
    min_score: 25
  - name: "Disqualified"
    min_score: 0

# --- Pass 2: Web Enrichment (optional) ---
# Uses DuckDuckGo search + Claude LLM to extract real-world signals.
# Requires: ANTHROPIC_API_KEY env var, duckduckgo-search and anthropic packages.
enrichment:
  output_sheet: "Pass 2 — Enriched"
  top_n: 50                    # only enrich top N from Pass 1
  search_query_template: '"{name}" locations employees HR'
  search_max_results: 5
  search_delay_seconds: 2
  llm_model: "claude-haiku-4-5-20251001"
  bonus_cap: 20
  bonus_rules:
    - signal: "multi_location"
      condition: "num_locations >= 3"
      points: 5
    - signal: "negative_sentiment"
      condition: "employee_sentiment == negative"
      points: 5
    - signal: "hr_initiatives"
      condition: "hr_initiatives == true"
      points: 5
    - signal: "decentralized"
      condition: "decentralized == true"
      points: 3
    - signal: "no_competitor"
      condition: "competitor_tools is empty"
      points: 3
    - signal: "has_competitor"
      condition: "competitor_tools is not empty"
      points: -5

  # Optional: split enrichment output into region-based tabs.
  # Uses word-boundary keyword matching on name + description + enrichment summary.
  # region_split:
  #   enabled: true
  #   default: "primary"           # tag for companies that don't match any group
  #   groups:
  #     - tag: "secondary"
  #       keywords: []             # add region-specific terms here
  #   output_sheets:
  #     primary: "Pass 2 — Primary"
  #     secondary: "Pass 2 — Secondary"
